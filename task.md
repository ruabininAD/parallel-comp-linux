

Поскольку наша дисциплина называется «Научно-исследовательская работа», она 
предполагает в большей степени самостоятельное изучение определённой темы.

**Задача 0**: установка и настройка среды виртуализации VirtualBox.

Здесь необходимо научиться создавать, удалять и настраивать виртуальные машины, сетевое 
окружение и распределять доступные вычислительные ресурсы.

[ ] Нам потребуется сеть NAT с адресом, указанным напротив вашей фамилии в высланной ранее 
таблице, 
[ ] для этой сети необходимо выключить DHCP (автоматическую настройку сетевого 
интерфейса), 
[ ] а в настройках создаваемых виртуальных машин на вкладке «Сеть» необходимо 
выбрать для первого сетевого адаптера тип сети «Сеть NAT», в противном случае наши узлы 
либо не смогут общаться между собой, либо не смогут обратиться к внешним сетевым 
ресурсам, либо они окажутся включёнными в сеть вашего физического компьютера, что 
потребует изменения схемы адресации, а конфигурация окажется «привязанной» к вашей 
сети, где вы выполняли первоначальную настройку. Остальные сетевые адаптеры на вкладке 
«Сеть» необходимо выключить, чтобы не создать путаницу и не усложнить себе жизнь.



Задача 1: установка ОС и базовая настройка сети.




В-шестых — сеть: уже на этапе установки можно полностью настроить сетевой интерфейс 
таким образом, чтобы получить работоспособную сетевую конфигурацию и к этому вопросу 
больше не возвращаться. 
[ ] Для этого необходимо помнить, что из диапазона адресов вашей сети NAT первый адрес узла всегда будет занят виртуальным маршрутизатором VirtualBox, и он же является адресом шлюза по-умолчанию и адресом сервера DNS. Поэтому адреса, 
которые вы будете назначать вашим узлам, не должны пересекаться, совпадать с адресом 
шлюза и адресом широковещательной рассылки. Также в установщике потребуется указать 
имена узла и домена. несмотря на то, что имя домена указывать не обязательно, я советую это 
сделать. Имя домена для всех узлов в вашей виртуальной сети должно быть одинаковым, а 
имена узлов — уникальными. Если всё сделано правильно — сеть между работающими 
узлами можно будет проверить командой ping с указанием ip-адреса узла, к которому вы 
обращаетесь. Для разрешения доменных имён необходимо будет выполнить дополнительные 
действия.

[ ] Задача 2: изучение базовых возможностей взаимодействия с ОС Линукс.


[ ] Изучите основную иерархию файловой системы (верхний уровень, начиная от корня), какие 
каталоги для чего используются, где расположены домашние каталоги пользователей и 
суперпользователя, какие права у пользователя для работы с файлами в своём домашнем 
каталоге и в других каталогах. Ознакомьтесь с атрибутами файлов и каталогов, с понятиями 
групп и пользователей в ОС Линукс, с тем, как работать с разрешениями на файлы и каталоги.

[ ] Следующим достижением должно стать выполнение основных задач пакетного менеджера: 
установка, удаление пакета, обновление списка пакетов и обновление версий установленного 
ПО. Здесь же необходимо познакомиться с понятием «зависимость»: почему в ряде случаев 
мы не можем установить произвольную версию пакета, а получаем сообщение об ошибке с 
выводом версий других установленных пакетов. Здесь вы можете проверить, установлен ли 
уже в вашей системе ssh-сервер и клиент, установлен ли компилятор gcc, библиотеки для 
разработки и запуска параллельных приложений openmp и openmpi. Пока что устанавливать 
недостающие пакеты не нужно, это вы сделаете чуть позднее.

[ ] Часто в процессе изучения ОС Линукс вам придётся обращаться к файлам журналов ошибок. 
Поэтому изучите, в какие файлы пишутся эти журналы, где эти файлы расположены, как 
правильно с ними работать.

[ ] Задача 3: завершение настройки сети.

[ ] Для обращения к другим узлам вашей виртуальной сети по их именам, а не ip-адресам, 
необходимо настроить разрешение имён. Сделать это можно несколькими способами, но мы 
воспользуемся самым простым из них: перечислим имена и сопоставим им адреса в файле 
/etc/hosts. Изучите, что это за файл, как возможно с его помощью разрешать имена узлов без 
настройки сервера службы DNS, каким образом добавлять и удалять записи в этом файле и 
каков формат этих записей. После успешной настройки (на каждом узле в файле hosts должны 
быть перечислены все остальные узлы) вы сможете обратиться к другому узлу командой ping 
уже с указанием имени узла, а не его ip-адреса.

[ ] На этом же этапе необходимо установить ssh-сервер и клиент, если они ещё не установлены, 
разобраться, что такое авторизация по ключу, выяснить, каким образом можно сгенерировать 
пару ключей и где они должны быть размещены, чтобы служба ssh могла использовать их для 
авторизации при подключении к другому узлу. Пару ключей необходимо будет сгенерировать 
для учётной записи обычного пользователя на каждом узле и один из ключей правильным 
образом разместить на других узлах, чтобы с каждого узла можно было подключиться ко всем 
остальным узлам.

[ ] Задача 4: подготовка среды разработки.

[ ] В качестве универсальной среды разработки начального уровня предлагается использовать 
простой текстовый редактор (vim, nano, ee...) в сочетании с компилятором gcc, запускаемым 
из командной строки. Для разработки параллельных программ потребуется установить gcc 
(если он ещё не установлен) и пакеты openmp и openmpi. Отдельно изучите, какие именно 
пакеты необходимо установить для исполнения и для сборки приложений, использующих эти 
технологии. Как правило, компоненты среды исполнения поставляются в одних пакетах, а 
разработки — в других.

[ ] Помимо установки пакетов, может потребоваться некоторая настройка пользовательского 
окружения. Для этого необходимо познакомиться с понятием переменных окружения, чтобы 
иметь возможность создавать и присваивать значения этим переменным, добавлять значения к 
существующим системным переменным, устанавливать их значения автоматически при входе 
пользователя в систему или иметь возможность установить их только на этапе запуска 
определённого приложения.

[ ] После этого необходимо проверить работоспособность такой среды разработки и исполнения 
на простых примерах, которые можно разработать самостоятельно или найти в сети — в 
данном случае это не принципиально. Исходный текст программы на C++ формируется в 
текстовом редакторе и сохраняется в файл, затем компилятором из этого текста собирается 
исполнимый файл, который затем запускается и демонстрирует работу в несколько потоков 
и/или на нескольких вычислительных узлах. Дополнительно нужно изучить особенности 
запуска MPI-приложений.

[ ] Задача 5: портирование приложения из лабораторной работы по теории графов.

Задание из лабораторной работы 0 по теории графов вам необходимо осмыслить и переписать 
на C++ с использованием технологии MPI. Причём, в данном случае принципиально важным 
является факт распараллеливания задачи и параллельное исполнение, а не получение 
максимальной производительности. Поэтому вопросы оптимизации здесь не затрагиваются. 
Исследуйте задание на предмет выявления тех её частей, которые могут исполняться 
параллельно. Например, можно ли и как распараллелить работу генератора, аналогично — 
кодировщика, декодировщика, каким образом можно распараллелить свой алгоритм сжатия…

Конечным итогом должна стать программа, реализующая ваше задание из лабораторной 
работы 0 по теории графов, в виде исходного кода на языке C++. Программа должна 
задействовать технологию MPI, собираться и запускаться на одном из узлов, в процессе 
работы использовать вычислительные ресурсы трёх вычислительных узлов (того, на котором 
осуществляется запуск, и двух других). Все узлы должны функционировать под управлением 
ОС Линукс назначенного вам дистрибутива.

П.С.: дополнительная очная встреча назначена на четверг, 29 июня, в 12:00.

Михаил Чуватов, СПбПУ.